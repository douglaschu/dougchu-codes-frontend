---
import { getPosts } from "../../lib/payload";
import BaseHead from "../../components/BaseHead.astro";
import Footer from "../../components/Footer.astro";
import Header from "../../components/Header.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../../consts";
const posts = await getPosts();
---

<!doctype html>
<head>
     <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
</head>
<body>
     <Header />
     <div class="posts">
          <ul>
               {
                    posts.map((post: any) => (
                         <li>
                              <a href={`/blog/${post.slug}`}>
                                   <h2>{post.title}</h2>
                              </a>
                              <time>
                                   {new Date(
                                        post.publishedAt,
                                   ).toLocaleDateString("en-US", {
                                        year: "numeric",
                                        month: "long",
                                        day: "numeric",
                                   })}
                              </time>
                         </li>
                    ))
               }
          </ul>
     </div>
     <Footer />
</body>

<style>
     .posts {
          padding: 5 rem;
          margin: 1 rem;
     }
</style>
